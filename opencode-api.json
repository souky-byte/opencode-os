{"openapi":"3.1.0","info":{"title":"OpenCode Studio API","description":"API for OpenCode Studio - AI-powered development platform","license":{"name":""},"version":"0.1.0"},"paths":{"/api/events":{"get":{"tags":["events"],"operationId":"events_stream","parameters":[{"name":"task_ids","in":"query","description":"Comma-separated task IDs to filter events","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"SSE event stream"}}}},"/api/filesystem/browse":{"get":{"tags":["filesystem"],"operationId":"browse_directory","parameters":[{"name":"path","in":"query","description":"Directory path to browse","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Directory listing","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BrowseResponse"}}}},"400":{"description":"Invalid path"}}}},"/api/project":{"get":{"tags":["project"],"operationId":"get_project_info","responses":{"200":{"description":"Current project info (legacy)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CurrentProjectResponse"}}}}}}},"/api/projects/current":{"get":{"tags":["projects"],"operationId":"get_current_project","responses":{"200":{"description":"Current project info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CurrentProjectResponse"}}}}}}},"/api/projects/init":{"post":{"tags":["projects"],"operationId":"init_project","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitProjectRequest"}}},"required":true},"responses":{"200":{"description":"Project initialized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitProjectResponse"}}}},"400":{"description":"Failed to initialize project","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitProjectResponse"}}}}}}},"/api/projects/open":{"post":{"tags":["projects"],"operationId":"open_project","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpenProjectRequest"}}},"required":true},"responses":{"200":{"description":"Project opened successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpenProjectResponse"}}}},"400":{"description":"Failed to open project","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpenProjectResponse"}}}}}}},"/api/projects/recent":{"get":{"tags":["projects"],"operationId":"get_recent_projects","responses":{"200":{"description":"List of recent projects","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecentProjectsResponse"}}}}}}},"/api/projects/recent/clear":{"post":{"tags":["projects"],"operationId":"clear_recent_projects","responses":{"200":{"description":"Recent projects list cleared","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClearRecentResponse"}}}}}}},"/api/projects/recent/remove":{"post":{"tags":["projects"],"operationId":"remove_recent_project","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveRecentRequest"}}},"required":true},"responses":{"200":{"description":"Project removed from recent list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveRecentResponse"}}}}}}},"/api/projects/validate":{"post":{"tags":["projects"],"operationId":"validate_project_path","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidatePathRequest"}}},"required":true},"responses":{"200":{"description":"Path validation result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidatePathResponse"}}}}}}},"/api/sessions":{"get":{"tags":["sessions"],"operationId":"list_sessions","responses":{"200":{"description":"List of all sessions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Session"}}}}}}}},"/api/sessions/{id}":{"get":{"tags":["sessions"],"operationId":"get_session","parameters":[{"name":"id","in":"path","description":"Session ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Session found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Session"}}}},"404":{"description":"Session not found"}}},"delete":{"tags":["sessions"],"operationId":"delete_session","parameters":[{"name":"id","in":"path","description":"Session ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Session deleted"},"404":{"description":"Session not found"}}}},"/api/sessions/{id}/activity":{"get":{"tags":["sessions"],"operationId":"session_activity_stream","parameters":[{"name":"id","in":"path","description":"Session ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"SSE activity stream"},"404":{"description":"Session not found"}}}},"/api/tasks":{"get":{"tags":["tasks"],"operationId":"list_tasks","responses":{"200":{"description":"List of all tasks","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Task"}}}}}}},"post":{"tags":["tasks"],"operationId":"create_task","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTaskRequest"}}},"required":true},"responses":{"201":{"description":"Task created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"400":{"description":"Invalid request"}}}},"/api/tasks/{id}":{"get":{"tags":["tasks"],"operationId":"get_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Task found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"404":{"description":"Task not found"}}},"delete":{"tags":["tasks"],"operationId":"delete_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Task deleted"},"404":{"description":"Task not found"}}},"patch":{"tags":["tasks"],"operationId":"update_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTaskRequest"}}},"required":true},"responses":{"200":{"description":"Task updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/execute":{"post":{"tags":["tasks"],"operationId":"execute_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"202":{"description":"Execution started","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteResponse"}}}},"404":{"description":"Task not found"},"500":{"description":"Execution failed to start"}}}},"/api/tasks/{id}/findings":{"get":{"tags":["tasks"],"operationId":"get_task_findings","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Task findings","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FindingsResponse"}}}},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/findings/fix":{"post":{"tags":["tasks"],"operationId":"fix_findings","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FixFindingsRequest"}}},"required":true},"responses":{"202":{"description":"Fix started","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteResponse"}}}},"400":{"description":"Invalid request"},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/findings/skip":{"post":{"tags":["tasks"],"operationId":"skip_findings","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Findings skipped, task moved to review","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"400":{"description":"Invalid state"},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/plan":{"get":{"tags":["tasks"],"operationId":"get_task_plan","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Plan content","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlanResponse"}}}},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/transition":{"post":{"tags":["tasks"],"operationId":"transition_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitionRequest"}}},"required":true},"responses":{"200":{"description":"Task transitioned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitionResponse"}}}},"400":{"description":"Invalid transition"},"404":{"description":"Task not found"}}}},"/api/tasks/{task_id}/sessions":{"get":{"tags":["sessions"],"operationId":"list_sessions_for_task","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Sessions for task","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Session"}}}}}}}},"/api/tasks/{task_id}/workspace":{"post":{"tags":["workspaces"],"operationId":"create_workspace_for_task","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"201":{"description":"Workspace created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceResponse"}}}},"404":{"description":"Task not found"}}}},"/api/workspaces":{"get":{"tags":["workspaces"],"operationId":"list_workspaces","responses":{"200":{"description":"List of all workspaces","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WorkspaceResponse"}}}}}}}},"/api/workspaces/{task_id}":{"get":{"tags":["workspaces"],"operationId":"get_workspace_status","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Workspace status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceStatusResponse"}}}},"404":{"description":"Workspace not found"}}},"delete":{"tags":["workspaces"],"operationId":"delete_workspace","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Workspace deleted"},"404":{"description":"Workspace not found"}}}},"/api/workspaces/{task_id}/diff":{"get":{"tags":["workspaces"],"operationId":"get_workspace_diff","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Workspace diff","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DiffResponse"}}}},"404":{"description":"Workspace not found"}}}},"/api/workspaces/{task_id}/merge":{"post":{"tags":["workspaces"],"operationId":"merge_workspace","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MergeRequest"}}},"required":true},"responses":{"200":{"description":"Merge result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MergeResponse"}}}},"404":{"description":"Workspace not found"}}}},"/health":{"get":{"tags":["health"],"operationId":"health_check","responses":{"200":{"description":"Health check","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}}},"components":{"schemas":{"BrowseQuery":{"type":"object","properties":{"path":{"type":"string"}}},"BrowseResponse":{"type":"object","required":["current_path","entries","is_vcs_root"],"properties":{"current_path":{"type":"string"},"entries":{"type":"array","items":{"$ref":"#/components/schemas/DirectoryEntry"}},"is_vcs_root":{"type":"boolean"},"parent_path":{"type":["string","null"]},"vcs":{"type":["string","null"]}}},"ClearRecentResponse":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean"}}},"CreateTaskRequest":{"type":"object","required":["title","description"],"properties":{"description":{"type":"string"},"roadmap_item_id":{"type":["string","null"],"format":"uuid"},"title":{"type":"string"}}},"CurrentProjectResponse":{"type":"object","properties":{"project":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectInfo"}]}}},"DiffResponse":{"type":"object","required":["task_id","diff"],"properties":{"diff":{"type":"string"},"task_id":{"type":"string"}}},"DirectoryEntry":{"type":"object","required":["name","path","is_dir","is_vcs_root"],"properties":{"is_dir":{"type":"boolean"},"is_vcs_root":{"type":"boolean"},"name":{"type":"string"},"path":{"type":"string"},"vcs":{"type":["string","null"]}}},"ExecuteResponse":{"type":"object","required":["task","session_id","opencode_session_id","phase"],"properties":{"opencode_session_id":{"type":"string"},"phase":{"type":"string"},"session_id":{"type":"string"},"task":{"$ref":"#/components/schemas/Task"}}},"FindingSeverity":{"type":"string","description":"Severity level of a finding","enum":["error","warning","info"]},"FindingStatus":{"type":"string","description":"Status of a finding","enum":["pending","fixed","skipped"]},"FindingsResponse":{"type":"object","required":["findings","summary","approved","exists"],"properties":{"approved":{"type":"boolean"},"exists":{"type":"boolean"},"findings":{"type":"array","items":{"$ref":"#/components/schemas/ReviewFinding"}},"summary":{"type":"string"}}},"FixFindingsRequest":{"type":"object","properties":{"finding_ids":{"type":["array","null"],"items":{"type":"string"},"description":"IDs of findings to fix, or empty to fix all"},"fix_all":{"type":["boolean","null"],"description":"If true, fix all findings regardless of finding_ids"}}},"HealthResponse":{"type":"object","required":["status","version"],"properties":{"status":{"type":"string"},"version":{"type":"string"}}},"InitProjectRequest":{"type":"object","required":["path"],"properties":{"force":{"type":"boolean"},"path":{"type":"string"}}},"InitProjectResponse":{"type":"object","required":["success","already_initialized"],"properties":{"already_initialized":{"type":"boolean"},"error":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectErrorResponse"}]},"project":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectInfo"}]},"success":{"type":"boolean"}}},"MergeRequest":{"type":"object","required":["message"],"properties":{"message":{"type":"string"}}},"MergeResponse":{"oneOf":[{"type":"object","required":["result"],"properties":{"result":{"type":"string","enum":["success"]}}},{"type":"object","required":["files","result"],"properties":{"files":{"type":"array","items":{"type":"string"}},"result":{"type":"string","enum":["conflicts"]}}}]},"OpenProjectRequest":{"type":"object","required":["path"],"properties":{"path":{"type":"string"}}},"OpenProjectResponse":{"type":"object","required":["success","was_initialized"],"properties":{"error":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectErrorResponse"}]},"project":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectInfo"}]},"success":{"type":"boolean"},"was_initialized":{"type":"boolean"}}},"PlanResponse":{"type":"object","required":["content","exists"],"properties":{"content":{"type":"string"},"exists":{"type":"boolean"}}},"ProjectErrorResponse":{"type":"object","required":["code","message"],"properties":{"code":{"type":"string"},"message":{"type":"string"}}},"ProjectInfo":{"type":"object","required":["name","path","vcs","tasks_count","initialized"],"properties":{"initialized":{"type":"boolean"},"name":{"type":"string"},"path":{"type":"string"},"tasks_count":{"type":"integer","format":"int64"},"vcs":{"type":"string"}}},"RecentProject":{"type":"object","required":["path","name","vcs","exists"],"properties":{"exists":{"type":"boolean"},"name":{"type":"string"},"path":{"type":"string"},"vcs":{"type":"string"}}},"RecentProjectsResponse":{"type":"object","required":["projects"],"properties":{"projects":{"type":"array","items":{"$ref":"#/components/schemas/RecentProject"}}}},"RemoveRecentRequest":{"type":"object","required":["path"],"properties":{"path":{"type":"string"}}},"RemoveRecentResponse":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean"}}},"ReviewFinding":{"type":"object","description":"A single review finding","required":["id","title","description","severity","status"],"properties":{"description":{"type":"string"},"file_path":{"type":["string","null"]},"id":{"type":"string"},"line_end":{"type":["integer","null"],"format":"int32"},"line_start":{"type":["integer","null"],"format":"int32"},"severity":{"$ref":"#/components/schemas/FindingSeverity"},"status":{"$ref":"#/components/schemas/FindingStatus"},"title":{"type":"string"}}},"Session":{"type":"object","required":["id","task_id","phase","status","created_at"],"properties":{"completed_at":{"type":["string","null"],"format":"date-time"},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"opencode_session_id":{"type":["string","null"]},"phase":{"$ref":"#/components/schemas/SessionPhase"},"started_at":{"type":["string","null"],"format":"date-time"},"status":{"$ref":"#/components/schemas/SessionStatus"},"task_id":{"type":"string","format":"uuid"}}},"SessionPhase":{"type":"string","enum":["planning","implementation","review"]},"SessionStatus":{"type":"string","enum":["pending","running","completed","failed","aborted"]},"Task":{"type":"object","required":["id","title","description","status","created_at","updated_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"description":{"type":"string"},"id":{"type":"string","format":"uuid"},"roadmap_item_id":{"type":["string","null"],"format":"uuid"},"status":{"$ref":"#/components/schemas/TaskStatus"},"title":{"type":"string"},"updated_at":{"type":"string","format":"date-time"},"workspace_path":{"type":["string","null"]}}},"TaskStatus":{"type":"string","enum":["todo","planning","planning_review","in_progress","ai_review","review","done"]},"TransitionRequest":{"type":"object","required":["status"],"properties":{"status":{"$ref":"#/components/schemas/TaskStatus"}}},"TransitionResponse":{"type":"object","required":["task","previous_status"],"properties":{"previous_status":{"$ref":"#/components/schemas/TaskStatus"},"task":{"$ref":"#/components/schemas/Task"}}},"UpdateTaskRequest":{"type":"object","properties":{"description":{"type":["string","null"]},"status":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/TaskStatus"}]},"title":{"type":["string","null"]},"workspace_path":{"type":["string","null"]}}},"ValidatePathRequest":{"type":"object","required":["path"],"properties":{"path":{"type":"string"}}},"ValidatePathResponse":{"type":"object","required":["valid","exists","is_vcs_repo"],"properties":{"error":{"type":["string","null"]},"exists":{"type":"boolean"},"is_vcs_repo":{"type":"boolean"},"name":{"type":["string","null"]},"valid":{"type":"boolean"},"vcs":{"type":["string","null"]}}},"WorkspaceResponse":{"type":"object","required":["task_id","path","branch_name","status","created_at"],"properties":{"branch_name":{"type":"string"},"created_at":{"type":"string"},"path":{"type":"string"},"status":{"type":"string"},"task_id":{"type":"string"}}},"WorkspaceStatusResponse":{"type":"object","required":["task_id","status"],"properties":{"status":{"type":"string"},"task_id":{"type":"string"}}}}},"tags":[{"name":"health","description":"Health check endpoints"},{"name":"project","description":"Legacy project info endpoints"},{"name":"projects","description":"Project management endpoints"},{"name":"tasks","description":"Task management endpoints"},{"name":"sessions","description":"Session management endpoints"},{"name":"events","description":"Real-time event streaming (SSE)"},{"name":"workspaces","description":"Workspace management endpoints"},{"name":"filesystem","description":"Filesystem browsing endpoints"}]}