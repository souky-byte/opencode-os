{"openapi":"3.1.0","info":{"title":"OpenCode Studio API","description":"API for OpenCode Studio - AI-powered development platform","license":{"name":""},"version":"0.1.0"},"paths":{"/api/events":{"get":{"tags":["events"],"operationId":"events_stream","parameters":[{"name":"task_ids","in":"query","description":"Comma-separated task IDs to filter events","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"SSE event stream"}}}},"/api/filesystem/browse":{"get":{"tags":["filesystem"],"operationId":"browse_directory","parameters":[{"name":"path","in":"query","description":"Directory path to browse","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Directory listing","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BrowseResponse"}}}},"400":{"description":"Invalid path"}}}},"/api/opencode/providers":{"get":{"tags":["opencode"],"operationId":"get_providers","responses":{"200":{"description":"List of connected providers with their models","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProvidersResponse"}}}},"500":{"description":"Failed to fetch providers from OpenCode"}}}},"/api/project":{"get":{"tags":["project"],"operationId":"get_project_info","responses":{"200":{"description":"Current project info (legacy)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CurrentProjectResponse"}}}}}}},"/api/projects/current":{"get":{"tags":["projects"],"operationId":"get_current_project","responses":{"200":{"description":"Current project info","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CurrentProjectResponse"}}}}}}},"/api/projects/init":{"post":{"tags":["projects"],"operationId":"init_project","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitProjectRequest"}}},"required":true},"responses":{"200":{"description":"Project initialized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitProjectResponse"}}}},"400":{"description":"Failed to initialize project","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InitProjectResponse"}}}}}}},"/api/projects/open":{"post":{"tags":["projects"],"operationId":"open_project","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpenProjectRequest"}}},"required":true},"responses":{"200":{"description":"Project opened successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpenProjectResponse"}}}},"400":{"description":"Failed to open project","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpenProjectResponse"}}}}}}},"/api/projects/recent":{"get":{"tags":["projects"],"operationId":"get_recent_projects","responses":{"200":{"description":"List of recent projects","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecentProjectsResponse"}}}}}}},"/api/projects/recent/clear":{"post":{"tags":["projects"],"operationId":"clear_recent_projects","responses":{"200":{"description":"Recent projects list cleared","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClearRecentResponse"}}}}}}},"/api/projects/recent/remove":{"post":{"tags":["projects"],"operationId":"remove_recent_project","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveRecentRequest"}}},"required":true},"responses":{"200":{"description":"Project removed from recent list","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveRecentResponse"}}}}}}},"/api/projects/validate":{"post":{"tags":["projects"],"operationId":"validate_project_path","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidatePathRequest"}}},"required":true},"responses":{"200":{"description":"Path validation result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidatePathResponse"}}}}}}},"/api/pull-requests":{"get":{"tags":["pull-requests"],"operationId":"list_pull_requests","parameters":[{"name":"state","in":"query","description":"Filter by state: open, closed, all","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of pull requests","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PullRequestsListResponse"}}}},"500":{"description":"GitHub API error"}}}},"/api/pull-requests/{number}":{"get":{"tags":["pull-requests"],"operationId":"get_pull_request","parameters":[{"name":"number","in":"path","description":"Pull request number","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"Pull request details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PullRequestDetail"}}}},"404":{"description":"Pull request not found"},"500":{"description":"GitHub API error"}}}},"/api/pull-requests/{number}/comments":{"get":{"tags":["pull-requests"],"operationId":"get_pull_request_comments","parameters":[{"name":"number","in":"path","description":"Pull request number","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"All PR comments","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrCommentsResponse"}}}},"500":{"description":"GitHub API error"}}},"post":{"tags":["pull-requests"],"operationId":"create_review_comment","parameters":[{"name":"number","in":"path","description":"Pull request number","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePrCommentRequest"}}},"required":true},"responses":{"201":{"description":"Comment created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrReviewComment"}}}},"400":{"description":"Invalid request"},"500":{"description":"GitHub API error"}}}},"/api/pull-requests/{number}/comments/{comment_id}/reply":{"post":{"tags":["pull-requests"],"operationId":"reply_to_comment","parameters":[{"name":"number","in":"path","description":"Pull request number","required":true,"schema":{"type":"integer","format":"int64","minimum":0}},{"name":"comment_id","in":"path","description":"Comment ID to reply to","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReplyToCommentRequest"}}},"required":true},"responses":{"201":{"description":"Reply created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrReviewComment"}}}},"400":{"description":"Invalid request"},"500":{"description":"GitHub API error"}}}},"/api/pull-requests/{number}/diff":{"get":{"tags":["pull-requests"],"operationId":"get_pull_request_diff","parameters":[{"name":"number","in":"path","description":"Pull request number","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"Pull request diff","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrDiffResponse"}}}},"500":{"description":"GitHub API error"}}}},"/api/pull-requests/{number}/files":{"get":{"tags":["pull-requests"],"operationId":"get_pull_request_files","parameters":[{"name":"number","in":"path","description":"Pull request number","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"Changed files","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PrFile"}}}}},"500":{"description":"GitHub API error"}}}},"/api/pull-requests/{number}/fix":{"post":{"tags":["pull-requests"],"operationId":"fix_from_pr_comments","parameters":[{"name":"number","in":"path","description":"Pull request number","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FixFromCommentsRequest"}}},"required":true},"responses":{"201":{"description":"Task created from comments","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FixFromCommentsResponse"}}}},"400":{"description":"Invalid request - no comments provided"},"500":{"description":"GitHub API error or task creation error"}}}},"/api/pull-requests/{number}/reviews":{"get":{"tags":["pull-requests"],"operationId":"get_pull_request_reviews","parameters":[{"name":"number","in":"path","description":"Pull request number","required":true,"schema":{"type":"integer","format":"int64","minimum":0}}],"responses":{"200":{"description":"PR reviews","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrReviewsResponse"}}}},"500":{"description":"GitHub API error"}}}},"/api/sessions":{"get":{"tags":["sessions"],"operationId":"list_sessions","responses":{"200":{"description":"List of all sessions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Session"}}}}}}}},"/api/sessions/{id}":{"get":{"tags":["sessions"],"operationId":"get_session","parameters":[{"name":"id","in":"path","description":"Session ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Session found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Session"}}}},"404":{"description":"Session not found"}}},"delete":{"tags":["sessions"],"operationId":"delete_session","parameters":[{"name":"id","in":"path","description":"Session ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Session deleted"},"404":{"description":"Session not found"}}}},"/api/sessions/{id}/activity":{"get":{"tags":["sessions"],"operationId":"session_activity_stream","parameters":[{"name":"id","in":"path","description":"Session ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"SSE activity stream"},"404":{"description":"Session not found"}}}},"/api/settings/github":{"get":{"tags":["settings"],"operationId":"get_github_settings","responses":{"200":{"description":"GitHub settings","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GitHubSettingsResponse"}}}}}},"put":{"tags":["settings"],"operationId":"update_github_settings","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateGitHubTokenRequest"}}},"required":true},"responses":{"200":{"description":"GitHub token updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GitHubSettingsResponse"}}}},"500":{"description":"Failed to save settings"}}},"delete":{"tags":["settings"],"operationId":"delete_github_token","responses":{"204":{"description":"GitHub token removed"},"500":{"description":"Failed to remove token"}}}},"/api/settings/models":{"get":{"tags":["settings"],"operationId":"get_phase_models","responses":{"200":{"description":"Current phase model settings","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhaseModelsResponse"}}}},"500":{"description":"Failed to read settings"}}},"put":{"tags":["settings"],"operationId":"update_phase_models","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatePhaseModelsRequest"}}},"required":true},"responses":{"200":{"description":"Settings updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhaseModelsResponse"}}}},"500":{"description":"Failed to save settings"}}}},"/api/settings/user-mode":{"get":{"tags":["settings"],"operationId":"get_user_mode","responses":{"200":{"description":"Current user mode","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserModeResponse"}}}}}},"put":{"tags":["settings"],"operationId":"update_user_mode","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserModeRequest"}}},"required":true},"responses":{"200":{"description":"User mode updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserModeResponse"}}}}}}},"/api/settings/wiki":{"get":{"tags":["settings"],"operationId":"get_wiki_settings","responses":{"200":{"description":"Wiki settings","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WikiSettingsResponse"}}}}}},"put":{"tags":["settings"],"operationId":"update_wiki_settings","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateWikiSettingsRequest"}}},"required":true},"responses":{"200":{"description":"Settings updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WikiSettingsResponse"}}}},"500":{"description":"Failed to save settings"}}}},"/api/tasks":{"get":{"tags":["tasks"],"operationId":"list_tasks","responses":{"200":{"description":"List of all tasks","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Task"}}}}}}},"post":{"tags":["tasks"],"operationId":"create_task","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTaskRequest"}}},"required":true},"responses":{"201":{"description":"Task created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"400":{"description":"Invalid request"}}}},"/api/tasks/{id}":{"get":{"tags":["tasks"],"operationId":"get_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Task found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"404":{"description":"Task not found"}}},"delete":{"tags":["tasks"],"operationId":"delete_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Task deleted"},"404":{"description":"Task not found"}}},"patch":{"tags":["tasks"],"operationId":"update_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTaskRequest"}}},"required":true},"responses":{"200":{"description":"Task updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/execute":{"post":{"tags":["tasks"],"operationId":"execute_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"202":{"description":"Execution started","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteResponse"}}}},"404":{"description":"Task not found"},"500":{"description":"Execution failed to start"}}}},"/api/tasks/{id}/findings":{"get":{"tags":["tasks"],"operationId":"get_task_findings","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Task findings","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FindingsResponse"}}}},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/findings/fix":{"post":{"tags":["tasks"],"operationId":"fix_findings","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FixFindingsRequest"}}},"required":true},"responses":{"202":{"description":"Fix started","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecuteResponse"}}}},"400":{"description":"Invalid request"},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/findings/skip":{"post":{"tags":["tasks"],"operationId":"skip_findings","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Findings skipped, task moved to review","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"400":{"description":"Invalid state"},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/phases":{"get":{"tags":["tasks"],"operationId":"get_task_phases","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Phases information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhasesResponse"}}}},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/plan":{"get":{"tags":["tasks"],"operationId":"get_task_plan","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Plan content","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlanResponse"}}}},"404":{"description":"Task not found"}}}},"/api/tasks/{id}/transition":{"post":{"tags":["tasks"],"operationId":"transition_task","parameters":[{"name":"id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitionRequest"}}},"required":true},"responses":{"200":{"description":"Task transitioned","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitionResponse"}}}},"400":{"description":"Invalid transition"},"404":{"description":"Task not found"}}}},"/api/tasks/{task_id}/comments":{"get":{"tags":["comments"],"operationId":"list_comments","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of comments","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentsListResponse"}}}}}},"post":{"tags":["comments"],"operationId":"create_comment","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCommentRequest"}}},"required":true},"responses":{"201":{"description":"Comment created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewCommentResponse"}}}}}}},"/api/tasks/{task_id}/comments/send-to-fix":{"post":{"tags":["comments"],"operationId":"send_comments_to_fix","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendToFixRequest"}}},"required":true},"responses":{"202":{"description":"Fix session started","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendToFixResponse"}}}},"400":{"description":"No comments selected"}}}},"/api/tasks/{task_id}/comments/{comment_id}":{"delete":{"tags":["comments"],"operationId":"delete_comment","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}},{"name":"comment_id","in":"path","description":"Comment ID","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Comment deleted"},"404":{"description":"Comment not found"}}}},"/api/tasks/{task_id}/complete":{"post":{"tags":["complete"],"operationId":"complete_task","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteTaskRequest"}}},"required":true},"responses":{"200":{"description":"Task completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompleteTaskResponse"}}}},"400":{"description":"Invalid request or task not in review status"},"404":{"description":"Task or workspace not found"},"409":{"description":"Merge conflicts"}}}},"/api/tasks/{task_id}/complete/preview":{"get":{"tags":["complete"],"operationId":"get_complete_preview","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Complete preview data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompletePreviewResponse"}}}},"400":{"description":"Task not in review status"},"404":{"description":"Task or workspace not found"}}}},"/api/tasks/{task_id}/diff/viewed":{"get":{"tags":["workspaces"],"operationId":"get_viewed_files","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of viewed files","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewedFilesResponse"}}}}}},"post":{"tags":["workspaces"],"operationId":"set_file_viewed","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetViewedRequest"}}},"required":true},"responses":{"204":{"description":"Viewed status updated"}}}},"/api/tasks/{task_id}/sessions":{"get":{"tags":["sessions"],"operationId":"list_sessions_for_task","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Sessions for task","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Session"}}}}}}}},"/api/tasks/{task_id}/workspace":{"post":{"tags":["workspaces"],"operationId":"create_workspace_for_task","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"201":{"description":"Workspace created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceResponse"}}}},"404":{"description":"Task not found"}}}},"/api/wiki/ask":{"post":{"tags":["wiki"],"operationId":"ask_wiki","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AskRequest"}}},"required":true},"responses":{"200":{"description":"RAG response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AskResponse"}}}},"400":{"description":"Invalid request"},"500":{"description":"Ask failed"}}}},"/api/wiki/index":{"post":{"tags":["wiki"],"operationId":"start_indexing","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexRequest"}}},"required":true},"responses":{"200":{"description":"Indexing started","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexResponse"}}}},"400":{"description":"Invalid request"},"500":{"description":"Failed to start indexing"}}}},"/api/wiki/pages/{slug}":{"get":{"tags":["wiki"],"operationId":"get_wiki_page","parameters":[{"name":"slug","in":"path","description":"Page slug","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Wiki page","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WikiPageResponse"}}}},"404":{"description":"Page not found"},"500":{"description":"Failed to get page"}}}},"/api/wiki/search":{"post":{"tags":["wiki"],"operationId":"search_wiki","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"Search results","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WikiSearchResponse"}}}},"400":{"description":"Invalid request"},"500":{"description":"Search failed"}}}},"/api/wiki/status":{"get":{"tags":["wiki"],"operationId":"get_wiki_status","responses":{"200":{"description":"Wiki status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WikiStatusResponse"}}}},"500":{"description":"Failed to get status"}}}},"/api/wiki/structure":{"get":{"tags":["wiki"],"operationId":"get_wiki_structure","parameters":[{"name":"branch","in":"query","description":"Branch name (default: first configured branch)","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Wiki structure","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WikiStructureResponse"}}}},"404":{"description":"Structure not found"},"500":{"description":"Failed to get structure"}}}},"/api/wiki/webhook/push":{"post":{"tags":["wiki"],"operationId":"handle_push_webhook","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookPushRequest"}}},"required":true},"responses":{"200":{"description":"Webhook processed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookResponse"}}}},"400":{"description":"Invalid request"}}}},"/api/workspaces":{"get":{"tags":["workspaces"],"operationId":"list_workspaces","responses":{"200":{"description":"List of all workspaces","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WorkspaceResponse"}}}}}}}},"/api/workspaces/{task_id}":{"get":{"tags":["workspaces"],"operationId":"get_workspace_status","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Workspace status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceStatusResponse"}}}},"404":{"description":"Workspace not found"}}},"delete":{"tags":["workspaces"],"operationId":"delete_workspace","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Workspace deleted"},"404":{"description":"Workspace not found"}}}},"/api/workspaces/{task_id}/diff":{"get":{"tags":["workspaces"],"operationId":"get_workspace_diff","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Workspace diff","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DiffResponse"}}}},"404":{"description":"Workspace not found"}}}},"/api/workspaces/{task_id}/merge":{"post":{"tags":["workspaces"],"operationId":"merge_workspace","parameters":[{"name":"task_id","in":"path","description":"Task ID","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MergeRequest"}}},"required":true},"responses":{"200":{"description":"Merge result","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MergeResponse"}}}},"404":{"description":"Workspace not found"}}}},"/health":{"get":{"tags":["health"],"operationId":"health_check","responses":{"200":{"description":"Health check","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}}},"components":{"schemas":{"AskRequest":{"type":"object","required":["question"],"properties":{"conversation_id":{"type":["string","null"]},"question":{"type":"string"}}},"AskResponse":{"type":"object","required":["answer","sources","conversation_id"],"properties":{"answer":{"type":"string"},"conversation_id":{"type":"string"},"sources":{"type":"array","items":{"$ref":"#/components/schemas/AskSource"}}}},"AskSource":{"type":"object","required":["file_path","start_line","end_line","score","snippet"],"properties":{"end_line":{"type":"integer","format":"int32","minimum":0},"file_path":{"type":"string"},"score":{"type":"number","format":"float"},"snippet":{"type":"string"},"start_line":{"type":"integer","format":"int32","minimum":0}}},"BranchStatus":{"type":"object","required":["branch","state","file_count","chunk_count","progress_percent"],"properties":{"branch":{"type":"string"},"chunk_count":{"type":"integer","format":"int32","minimum":0},"error_message":{"type":["string","null"]},"file_count":{"type":"integer","format":"int32","minimum":0},"last_indexed_at":{"type":["string","null"]},"progress_percent":{"type":"integer","format":"int32","minimum":0},"state":{"type":"string"}}},"BrowseQuery":{"type":"object","properties":{"path":{"type":"string"}}},"BrowseResponse":{"type":"object","required":["current_path","entries","is_vcs_root"],"properties":{"current_path":{"type":"string"},"entries":{"type":"array","items":{"$ref":"#/components/schemas/DirectoryEntry"}},"is_vcs_root":{"type":"boolean"},"parent_path":{"type":["string","null"]},"vcs":{"type":["string","null"]}}},"CheckRun":{"type":"object","required":["name","status"],"properties":{"conclusion":{"type":["string","null"]},"html_url":{"type":["string","null"]},"name":{"type":"string"},"status":{"type":"string"}}},"CiState":{"type":"string","enum":["pending","success","failure","error"]},"CiStatus":{"type":"object","required":["state","total_count","checks"],"properties":{"checks":{"type":"array","items":{"$ref":"#/components/schemas/CheckRun"}},"state":{"$ref":"#/components/schemas/CiState"},"total_count":{"type":"integer","format":"int32","minimum":0}}},"ClearRecentResponse":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean"}}},"CommentsListResponse":{"type":"object","required":["comments"],"properties":{"comments":{"type":"array","items":{"$ref":"#/components/schemas/ReviewCommentResponse"}}}},"CompleteAction":{"type":"string","enum":["create_pr","merge_local","complete_only"]},"CompletePreviewResponse":{"type":"object","required":["task_id","branch_name","base_branch","diff_summary","suggested_pr_title","suggested_pr_body","github_available","has_uncommitted_changes"],"properties":{"base_branch":{"type":"string"},"branch_name":{"type":"string"},"diff_summary":{"$ref":"#/components/schemas/DiffSummary"},"github_available":{"type":"boolean"},"has_uncommitted_changes":{"type":"boolean"},"suggested_pr_body":{"type":"string"},"suggested_pr_title":{"type":"string"},"task_id":{"type":"string"}}},"CompleteTaskRequest":{"type":"object","required":["action","cleanup_worktree"],"properties":{"action":{"$ref":"#/components/schemas/CompleteAction"},"cleanup_worktree":{"type":"boolean"},"merge_options":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MergeOptions"}]},"pr_options":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/PrOptions"}]}}},"CompleteTaskResponse":{"type":"object","required":["success","worktree_cleaned"],"properties":{"merge_result":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/MergeResultInfo"}]},"pr":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/PrInfo"}]},"success":{"type":"boolean"},"worktree_cleaned":{"type":"boolean"}}},"CreateCommentRequest":{"type":"object","required":["file_path","line_start","line_end","content"],"properties":{"content":{"type":"string"},"file_path":{"type":"string"},"line_end":{"type":"integer","format":"int64"},"line_start":{"type":"integer","format":"int64"},"side":{"type":"string"}}},"CreatePrCommentRequest":{"type":"object","required":["path","line","side","body","commit_id"],"properties":{"body":{"type":"string"},"commit_id":{"type":"string"},"in_reply_to":{"type":["integer","null"],"format":"int64","minimum":0},"line":{"type":"integer","format":"int32","minimum":0},"path":{"type":"string"},"side":{"type":"string"}}},"CreateTaskRequest":{"type":"object","required":["title","description"],"properties":{"description":{"type":"string"},"roadmap_item_id":{"type":["string","null"],"format":"uuid"},"title":{"type":"string"}}},"CurrentProjectResponse":{"type":"object","properties":{"project":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectInfo"}]}}},"DiffResponse":{"type":"object","required":["task_id","diff"],"properties":{"diff":{"type":"string"},"task_id":{"type":"string"}}},"DiffSide":{"type":"string","enum":["LEFT","RIGHT"]},"DiffSummary":{"type":"object","description":"Summary of changes in a workspace","required":["files_changed","additions","deletions"],"properties":{"additions":{"type":"integer","format":"int32","description":"Number of lines added","minimum":0},"deletions":{"type":"integer","format":"int32","description":"Number of lines deleted","minimum":0},"files_changed":{"type":"integer","format":"int32","description":"Number of files changed","minimum":0}}},"DirectoryEntry":{"type":"object","required":["name","path","is_dir","is_vcs_root"],"properties":{"is_dir":{"type":"boolean"},"is_vcs_root":{"type":"boolean"},"name":{"type":"string"},"path":{"type":"string"},"vcs":{"type":["string","null"]}}},"ExecuteResponse":{"type":"object","required":["task","session_id","opencode_session_id","phase"],"properties":{"opencode_session_id":{"type":"string"},"phase":{"type":"string"},"session_id":{"type":"string"},"task":{"$ref":"#/components/schemas/Task"}}},"FileStatus":{"type":"string","enum":["added","removed","modified","renamed","copied","changed","unchanged"]},"FindingSeverity":{"type":"string","description":"Severity level of a finding","enum":["error","warning","info"]},"FindingStatus":{"type":"string","description":"Status of a finding","enum":["pending","fixed","skipped"]},"FindingsResponse":{"type":"object","required":["findings","summary","approved","exists"],"properties":{"approved":{"type":"boolean"},"exists":{"type":"boolean"},"findings":{"type":"array","items":{"$ref":"#/components/schemas/ReviewFinding"}},"summary":{"type":"string"}}},"FixFindingsRequest":{"type":"object","properties":{"finding_ids":{"type":["array","null"],"items":{"type":"string"},"description":"IDs of findings to fix, or empty to fix all"},"fix_all":{"type":["boolean","null"],"description":"If true, fix all findings regardless of finding_ids"}}},"FixFromCommentsRequest":{"type":"object","required":["comment_ids"],"properties":{"comment_ids":{"type":"array","items":{"type":"integer","format":"int64","minimum":0},"description":"List of comment IDs to fix"}}},"FixFromCommentsResponse":{"type":"object","required":["task","comments_included"],"properties":{"comments_included":{"type":"integer","minimum":0},"task":{"$ref":"#/components/schemas/Task"}}},"GitHubSettingsResponse":{"type":"object","required":["has_token"],"properties":{"has_token":{"type":"boolean","description":"Whether a GitHub token is configured (true if token exists)"},"masked_token":{"type":["string","null"],"description":"Masked token for display (e.g., \"ghp_****abcd\")"}}},"GitHubUser":{"type":"object","required":["login","avatar_url","html_url"],"properties":{"avatar_url":{"type":"string"},"html_url":{"type":"string"},"login":{"type":"string"}}},"HealthResponse":{"type":"object","required":["status","version"],"properties":{"status":{"type":"string"},"version":{"type":"string"}}},"IndexRequest":{"type":"object","properties":{"branch":{"type":["string","null"]},"force":{"type":["boolean","null"]}}},"IndexResponse":{"type":"object","required":["started","branch","message"],"properties":{"branch":{"type":"string"},"message":{"type":"string"},"started":{"type":"boolean"}}},"InitProjectRequest":{"type":"object","required":["path"],"properties":{"force":{"type":"boolean"},"path":{"type":"string"}}},"InitProjectResponse":{"type":"object","required":["success","already_initialized"],"properties":{"already_initialized":{"type":"boolean"},"error":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectErrorResponse"}]},"project":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectInfo"}]},"success":{"type":"boolean"}}},"Label":{"type":"object","required":["name","color"],"properties":{"color":{"type":"string"},"description":{"type":["string","null"]},"name":{"type":"string"}}},"MergeOptions":{"type":"object","required":["commit_message"],"properties":{"commit_message":{"type":"string"}}},"MergeRequest":{"type":"object","required":["message"],"properties":{"message":{"type":"string"}}},"MergeResponse":{"oneOf":[{"type":"object","required":["result"],"properties":{"result":{"type":"string","enum":["success"]}}},{"type":"object","required":["files","result"],"properties":{"files":{"type":"array","items":{"type":"string"}},"result":{"type":"string","enum":["conflicts"]}}}]},"MergeResultInfo":{"oneOf":[{"type":"object","required":["status"],"properties":{"commit_sha":{"type":["string","null"]},"status":{"type":"string","enum":["success"]}}},{"type":"object","required":["files","status"],"properties":{"files":{"type":"array","items":{"type":"string"}},"status":{"type":"string","enum":["conflicts"]}}}]},"ModelSelection":{"type":"object","description":"Model selection for a specific phase","required":["provider_id","model_id"],"properties":{"model_id":{"type":"string","description":"Model ID (e.g., \"claude-sonnet-4-20250514\", \"gpt-4o\")"},"provider_id":{"type":"string","description":"Provider ID (e.g., \"anthropic\", \"openai\")"}}},"OpenCodeModel":{"type":"object","required":["id","name"],"properties":{"id":{"type":"string"},"name":{"type":"string"}}},"OpenCodeProvider":{"type":"object","required":["id","name","models"],"properties":{"id":{"type":"string"},"models":{"type":"array","items":{"$ref":"#/components/schemas/OpenCodeModel"}},"name":{"type":"string"}}},"OpenProjectRequest":{"type":"object","required":["path"],"properties":{"path":{"type":"string"}}},"OpenProjectResponse":{"type":"object","required":["success","was_initialized"],"properties":{"error":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectErrorResponse"}]},"project":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ProjectInfo"}]},"success":{"type":"boolean"},"was_initialized":{"type":"boolean"}}},"PhaseInfo":{"type":"object","description":"Information about a single implementation phase","required":["number","title","content","status"],"properties":{"content":{"type":"string","description":"Phase content from the plan"},"number":{"type":"integer","format":"int32","description":"Phase number (1-indexed)","minimum":0},"session_id":{"type":["string","null"],"description":"Associated session ID (if started)"},"status":{"$ref":"#/components/schemas/PhaseStatus","description":"Current status of this phase"},"summary":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/PhaseSummary","description":"Summary of completed phase"}]},"title":{"type":"string","description":"Phase title"}}},"PhaseModels":{"type":"object","description":"Per-phase model configuration","properties":{"fix":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ModelSelection","description":"Model for fix phase"}]},"implementation":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ModelSelection","description":"Model for implementation phase"}]},"planning":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ModelSelection","description":"Model for planning phase"}]},"review":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ModelSelection","description":"Model for review phase"}]}}},"PhaseModelsResponse":{"type":"object","required":["phase_models"],"properties":{"phase_models":{"$ref":"#/components/schemas/PhaseModels"}}},"PhaseStatus":{"type":"string","description":"Phase status for display","enum":["pending","running","completed"]},"PhaseSummary":{"type":"object","description":"Summary of a completed implementation phase","required":["phase_number","title","summary","files_changed","completed_at"],"properties":{"completed_at":{"type":"string","format":"date-time","description":"When the phase was completed"},"files_changed":{"type":"array","items":{"type":"string"},"description":"List of files that were changed"},"notes":{"type":["string","null"],"description":"Notes for the next phase (important context)"},"phase_number":{"type":"integer","format":"int32","description":"Phase number that was completed","minimum":0},"summary":{"type":"string","description":"Summary of what was done"},"title":{"type":"string","description":"Phase title"}}},"PhasesResponse":{"type":"object","description":"Response for phases endpoint","required":["is_multi_phase","total_phases","phases"],"properties":{"current_phase":{"type":["integer","null"],"format":"int32","description":"Current phase being executed (1-indexed), None if not started or completed","minimum":0},"is_multi_phase":{"type":"boolean","description":"Whether this task has multiple phases"},"phases":{"type":"array","items":{"$ref":"#/components/schemas/PhaseInfo"},"description":"List of all phases with their status"},"total_phases":{"type":"integer","format":"int32","description":"Total number of phases","minimum":0}}},"PlanResponse":{"type":"object","required":["content","exists"],"properties":{"content":{"type":"string"},"exists":{"type":"boolean"}}},"PrCommentsResponse":{"type":"object","required":["review_comments","issue_comments"],"properties":{"issue_comments":{"type":"array","items":{"$ref":"#/components/schemas/PrIssueComment"}},"review_comments":{"type":"array","items":{"$ref":"#/components/schemas/PrReviewComment"}}}},"PrDiffResponse":{"type":"object","required":["diff","files"],"properties":{"diff":{"type":"string"},"files":{"type":"array","items":{"$ref":"#/components/schemas/PrFile"}}}},"PrFile":{"type":"object","required":["filename","status","additions","deletions","changes"],"properties":{"additions":{"type":"integer","format":"int32","minimum":0},"changes":{"type":"integer","format":"int32","minimum":0},"deletions":{"type":"integer","format":"int32","minimum":0},"filename":{"type":"string"},"patch":{"type":["string","null"]},"previous_filename":{"type":["string","null"]},"status":{"$ref":"#/components/schemas/FileStatus"}}},"PrInfo":{"type":"object","required":["number","url","title"],"properties":{"number":{"type":"integer","format":"int64","minimum":0},"title":{"type":"string"},"url":{"type":"string"}}},"PrIssueComment":{"type":"object","required":["id","body","user","created_at","updated_at","html_url"],"properties":{"body":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"html_url":{"type":"string"},"id":{"type":"integer","format":"int64","minimum":0},"reactions":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Reactions"}]},"updated_at":{"type":"string","format":"date-time"},"user":{"$ref":"#/components/schemas/GitHubUser"}}},"PrOptions":{"type":"object","required":["title","body","base_branch","draft"],"properties":{"base_branch":{"type":"string"},"body":{"type":"string"},"draft":{"type":"boolean"},"title":{"type":"string"}}},"PrReview":{"type":"object","required":["id","user","state","html_url"],"properties":{"body":{"type":["string","null"]},"html_url":{"type":"string"},"id":{"type":"integer","format":"int64","minimum":0},"state":{"$ref":"#/components/schemas/ReviewState"},"submitted_at":{"type":["string","null"],"format":"date-time"},"user":{"$ref":"#/components/schemas/GitHubUser"}}},"PrReviewComment":{"type":"object","required":["id","body","path","side","commit_id","user","created_at","updated_at","html_url"],"properties":{"body":{"type":"string"},"commit_id":{"type":"string"},"created_at":{"type":"string","format":"date-time"},"html_url":{"type":"string"},"id":{"type":"integer","format":"int64","minimum":0},"in_reply_to_id":{"type":["integer","null"],"format":"int64","minimum":0},"line":{"type":["integer","null"],"format":"int32","minimum":0},"original_line":{"type":["integer","null"],"format":"int32","minimum":0},"path":{"type":"string"},"reactions":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Reactions"}]},"side":{"$ref":"#/components/schemas/DiffSide"},"updated_at":{"type":"string","format":"date-time"},"user":{"$ref":"#/components/schemas/GitHubUser"}}},"PrReviewsResponse":{"type":"object","required":["reviews"],"properties":{"reviews":{"type":"array","items":{"$ref":"#/components/schemas/PrReview"}}}},"PrState":{"type":"string","enum":["open","closed","merged"]},"ProjectConfig":{"type":"object","description":"Project-level configuration stored in .opencode-studio/config.json","properties":{"phase_models":{"$ref":"#/components/schemas/PhaseModels"},"user_mode":{"$ref":"#/components/schemas/UserMode"},"wiki":{"$ref":"#/components/schemas/WikiConfig"}}},"ProjectErrorResponse":{"type":"object","required":["code","message"],"properties":{"code":{"type":"string"},"message":{"type":"string"}}},"ProjectInfo":{"type":"object","required":["name","path","vcs","tasks_count","initialized"],"properties":{"initialized":{"type":"boolean"},"name":{"type":"string"},"path":{"type":"string"},"tasks_count":{"type":"integer","format":"int64"},"vcs":{"type":"string"}}},"ProvidersResponse":{"type":"object","required":["providers"],"properties":{"providers":{"type":"array","items":{"$ref":"#/components/schemas/OpenCodeProvider"}}}},"PullRequestDetail":{"type":"object","required":["number","title","state","head_branch","base_branch","html_url","created_at","updated_at","user","additions","deletions","changed_files","labels","requested_reviewers","draft","comments_count","review_comments_count"],"properties":{"additions":{"type":"integer","format":"int32","minimum":0},"base_branch":{"type":"string"},"body":{"type":["string","null"]},"changed_files":{"type":"integer","format":"int32","minimum":0},"ci_status":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/CiStatus"}]},"comments_count":{"type":"integer","format":"int32","minimum":0},"created_at":{"type":"string","format":"date-time"},"deletions":{"type":"integer","format":"int32","minimum":0},"draft":{"type":"boolean"},"head_branch":{"type":"string"},"html_url":{"type":"string"},"labels":{"type":"array","items":{"$ref":"#/components/schemas/Label"}},"mergeable":{"type":["boolean","null"]},"mergeable_state":{"type":["string","null"]},"merged_at":{"type":["string","null"],"format":"date-time"},"number":{"type":"integer","format":"int64","minimum":0},"requested_reviewers":{"type":"array","items":{"$ref":"#/components/schemas/GitHubUser"}},"review_comments_count":{"type":"integer","format":"int32","minimum":0},"state":{"$ref":"#/components/schemas/PrState"},"title":{"type":"string"},"updated_at":{"type":"string","format":"date-time"},"user":{"$ref":"#/components/schemas/GitHubUser"}}},"PullRequestsListResponse":{"type":"object","required":["pull_requests"],"properties":{"pull_requests":{"type":"array","items":{"$ref":"#/components/schemas/PullRequestDetail"}}}},"Reactions":{"type":"object","required":["total_count","+1","-1","laugh","hooray","confused","heart","rocket","eyes"],"properties":{"+1":{"type":"integer","format":"int32","minimum":0},"-1":{"type":"integer","format":"int32","minimum":0},"confused":{"type":"integer","format":"int32","minimum":0},"eyes":{"type":"integer","format":"int32","minimum":0},"heart":{"type":"integer","format":"int32","minimum":0},"hooray":{"type":"integer","format":"int32","minimum":0},"laugh":{"type":"integer","format":"int32","minimum":0},"rocket":{"type":"integer","format":"int32","minimum":0},"total_count":{"type":"integer","format":"int32","minimum":0}}},"RecentProject":{"type":"object","required":["path","name","vcs","exists"],"properties":{"exists":{"type":"boolean"},"name":{"type":"string"},"path":{"type":"string"},"vcs":{"type":"string"}}},"RecentProjectsResponse":{"type":"object","required":["projects"],"properties":{"projects":{"type":"array","items":{"$ref":"#/components/schemas/RecentProject"}}}},"RemoveRecentRequest":{"type":"object","required":["path"],"properties":{"path":{"type":"string"}}},"RemoveRecentResponse":{"type":"object","required":["success"],"properties":{"success":{"type":"boolean"}}},"ReplyToCommentRequest":{"type":"object","required":["body"],"properties":{"body":{"type":"string"}}},"ReviewCommentResponse":{"type":"object","required":["id","task_id","file_path","line_start","line_end","side","content","status","created_at"],"properties":{"content":{"type":"string"},"created_at":{"type":"integer","format":"int64"},"file_path":{"type":"string"},"id":{"type":"string"},"line_end":{"type":"integer","format":"int64"},"line_start":{"type":"integer","format":"int64"},"side":{"type":"string"},"status":{"type":"string"},"task_id":{"type":"string"}}},"ReviewFinding":{"type":"object","description":"A single review finding","required":["id","title","description","severity","status"],"properties":{"description":{"type":"string"},"file_path":{"type":["string","null"]},"id":{"type":"string"},"line_end":{"type":["integer","null"],"format":"int32"},"line_start":{"type":["integer","null"],"format":"int32"},"severity":{"$ref":"#/components/schemas/FindingSeverity"},"status":{"$ref":"#/components/schemas/FindingStatus"},"title":{"type":"string"}}},"ReviewState":{"type":"string","enum":["APPROVED","CHANGES_REQUESTED","COMMENTED","PENDING","DISMISSED"]},"SearchRequest":{"type":"object","required":["query"],"properties":{"limit":{"type":["integer","null"],"minimum":0},"query":{"type":"string"}}},"SendToFixRequest":{"type":"object","required":["comment_ids"],"properties":{"comment_ids":{"type":"array","items":{"type":"string"}}}},"SendToFixResponse":{"type":"object","required":["session_id","comments_count"],"properties":{"comments_count":{"type":"integer","minimum":0},"session_id":{"type":"string"}}},"Session":{"type":"object","required":["id","task_id","phase","status","created_at"],"properties":{"completed_at":{"type":["string","null"],"format":"date-time"},"created_at":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"implementation_phase_number":{"type":["integer","null"],"format":"int32","description":"For multi-phase implementation: current phase number (1-indexed)","minimum":0},"implementation_phase_title":{"type":["string","null"],"description":"For multi-phase implementation: current phase title"},"opencode_session_id":{"type":["string","null"]},"phase":{"$ref":"#/components/schemas/SessionPhase"},"started_at":{"type":["string","null"],"format":"date-time"},"status":{"$ref":"#/components/schemas/SessionStatus"},"task_id":{"type":"string","format":"uuid"}}},"SessionPhase":{"type":"string","enum":["planning","implementation","review","fix"]},"SessionStatus":{"type":"string","enum":["pending","running","completed","failed","aborted"]},"SetViewedRequest":{"type":"object","required":["file_path","viewed"],"properties":{"file_path":{"type":"string"},"viewed":{"type":"boolean"}}},"Task":{"type":"object","required":["id","title","description","status","created_at","updated_at"],"properties":{"created_at":{"type":"string","format":"date-time"},"description":{"type":"string"},"id":{"type":"string","format":"uuid"},"roadmap_item_id":{"type":["string","null"],"format":"uuid"},"status":{"$ref":"#/components/schemas/TaskStatus"},"title":{"type":"string"},"updated_at":{"type":"string","format":"date-time"},"workspace_path":{"type":["string","null"]}}},"TaskStatus":{"type":"string","enum":["todo","planning","planning_review","in_progress","ai_review","fix","review","done"]},"TransitionRequest":{"type":"object","required":["status"],"properties":{"status":{"$ref":"#/components/schemas/TaskStatus"}}},"TransitionResponse":{"type":"object","required":["task","previous_status"],"properties":{"previous_status":{"$ref":"#/components/schemas/TaskStatus"},"task":{"$ref":"#/components/schemas/Task"}}},"UpdateGitHubTokenRequest":{"type":"object","properties":{"token":{"type":["string","null"],"description":"The GitHub personal access token. Set to null or empty string to remove."}}},"UpdatePhaseModelsRequest":{"type":"object","properties":{"fix":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ModelSelection"}]},"implementation":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ModelSelection"}]},"planning":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ModelSelection"}]},"review":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/ModelSelection"}]}}},"UpdateTaskRequest":{"type":"object","properties":{"description":{"type":["string","null"]},"status":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/TaskStatus"}]},"title":{"type":["string","null"]},"workspace_path":{"type":["string","null"]}}},"UpdateUserModeRequest":{"type":"object","required":["mode"],"properties":{"mode":{"$ref":"#/components/schemas/UserMode"}}},"UpdateWikiSettingsRequest":{"type":"object","properties":{"auto_sync":{"type":["boolean","null"]},"branches":{"type":["array","null"],"items":{"type":"string"}},"chat_model":{"type":["string","null"]},"embedding_model":{"type":["string","null"]},"enabled":{"type":["boolean","null"]},"openrouter_api_key":{"type":["string","null"]}}},"UserMode":{"type":"string","description":"User interface mode","enum":["developer","basic"]},"UserModeResponse":{"type":"object","required":["mode"],"properties":{"mode":{"$ref":"#/components/schemas/UserMode"}}},"ValidatePathRequest":{"type":"object","required":["path"],"properties":{"path":{"type":"string"}}},"ValidatePathResponse":{"type":"object","required":["valid","exists","is_vcs_repo"],"properties":{"error":{"type":["string","null"]},"exists":{"type":"boolean"},"is_vcs_repo":{"type":"boolean"},"name":{"type":["string","null"]},"valid":{"type":"boolean"},"vcs":{"type":["string","null"]}}},"ViewedFilesResponse":{"type":"object","required":["viewed_files"],"properties":{"viewed_files":{"type":"array","items":{"type":"string"}}}},"WebhookPushRequest":{"type":"object","required":["ref","after"],"properties":{"after":{"type":"string"},"ref":{"type":"string"}}},"WebhookResponse":{"type":"object","required":["accepted","message"],"properties":{"accepted":{"type":"boolean"},"message":{"type":"string"}}},"WikiConfig":{"type":"object","description":"Wiki feature configuration","properties":{"auto_sync":{"type":"boolean","description":"Auto-sync on git push webhook"},"branches":{"type":"array","items":{"type":"string"},"description":"Branches to index (e.g., [\"main\", \"develop\"])"},"chat_model":{"type":["string","null"],"description":"Chat model for RAG (default: \"anthropic/claude-3.5-sonnet\")"},"embedding_model":{"type":["string","null"],"description":"Embedding model (default: \"openai/text-embedding-3-small\")"},"enabled":{"type":"boolean","description":"Whether wiki feature is enabled"},"openrouter_api_key":{"type":["string","null"],"description":"OpenRouter API key for embeddings and chat"}}},"WikiPageResponse":{"type":"object","required":["slug","title","content","page_type","file_paths","has_diagrams","updated_at"],"properties":{"content":{"type":"string"},"file_paths":{"type":"array","items":{"type":"string"}},"has_diagrams":{"type":"boolean"},"page_type":{"type":"string"},"parent_slug":{"type":["string","null"]},"slug":{"type":"string"},"title":{"type":"string"},"updated_at":{"type":"string"}}},"WikiSearchResponse":{"type":"object","required":["query","results","total_count","duration_ms"],"properties":{"duration_ms":{"type":"integer","format":"int64","minimum":0},"query":{"type":"string"},"results":{"type":"array","items":{"$ref":"#/components/schemas/WikiSearchResult"}},"total_count":{"type":"integer","format":"int32","minimum":0}}},"WikiSearchResult":{"type":"object","required":["file_path","start_line","end_line","content","score"],"properties":{"content":{"type":"string"},"end_line":{"type":"integer","format":"int32","minimum":0},"file_path":{"type":"string"},"language":{"type":["string","null"]},"score":{"type":"number","format":"float"},"start_line":{"type":"integer","format":"int32","minimum":0}}},"WikiSettingsResponse":{"type":"object","required":["enabled","branches","has_api_key","auto_sync"],"properties":{"auto_sync":{"type":"boolean"},"branches":{"type":"array","items":{"type":"string"}},"chat_model":{"type":["string","null"]},"embedding_model":{"type":["string","null"]},"enabled":{"type":"boolean"},"has_api_key":{"type":"boolean"}}},"WikiStatusResponse":{"type":"object","required":["enabled","configured","branches"],"properties":{"branches":{"type":"array","items":{"$ref":"#/components/schemas/BranchStatus"}},"configured":{"type":"boolean"},"enabled":{"type":"boolean"}}},"WikiStructureResponse":{"type":"object","required":["branch","root","page_count"],"properties":{"branch":{"type":"string"},"page_count":{"type":"integer","format":"int32","minimum":0},"root":{"$ref":"#/components/schemas/WikiTreeNode"}}},"WikiTreeNode":{"type":"object","required":["slug","title","page_type","order","children"],"properties":{"children":{"type":"array","items":{"$ref":"#/components/schemas/WikiTreeNode"}},"order":{"type":"integer","format":"int32","minimum":0},"page_type":{"type":"string"},"slug":{"type":"string"},"title":{"type":"string"}}},"WorkspaceResponse":{"type":"object","required":["task_id","path","branch_name","status","created_at"],"properties":{"branch_name":{"type":"string"},"created_at":{"type":"string"},"path":{"type":"string"},"status":{"type":"string"},"task_id":{"type":"string"}}},"WorkspaceStatusResponse":{"type":"object","required":["task_id","status"],"properties":{"status":{"type":"string"},"task_id":{"type":"string"}}}}},"tags":[{"name":"health","description":"Health check endpoints"},{"name":"project","description":"Legacy project info endpoints"},{"name":"projects","description":"Project management endpoints"},{"name":"tasks","description":"Task management endpoints"},{"name":"sessions","description":"Session management endpoints"},{"name":"events","description":"Real-time event streaming (SSE)"},{"name":"workspaces","description":"Workspace management endpoints"},{"name":"comments","description":"Review comments endpoints"},{"name":"filesystem","description":"Filesystem browsing endpoints"},{"name":"opencode","description":"OpenCode integration endpoints"},{"name":"settings","description":"Project settings endpoints"},{"name":"complete","description":"Task completion and Git workflow endpoints"},{"name":"pull-requests","description":"GitHub Pull Request management endpoints"},{"name":"wiki","description":"Wiki documentation and search endpoints"}]}